{% extends "layout.html" %}

{% block title %}Register Page{% endblock %}

{% block body %}
<div class=" bg-slate-900  overflow-hidden flex flex-col items-center justify-center">
    <div class="pb-5">
        <svg id="svg" fill="#f3f4f6" 
        width="120" height="120" 
        viewBox="144 144 512 512" stroke-width="0" 
        class="md:w-40 md:h-40 lg:w-40 lg:h-40">
            <path d="m609.92 400c0 115.93-93.984 209.92-209.92 209.92-115.94 0-209.92-93.984-209.92-209.92 0-115.94 93.984-209.92 209.92-209.92 115.93 0 209.92 93.984 209.92 209.92zm-209.92-20.992c-34.785 0-62.977-28.195-62.977-62.977s28.191-62.977 62.977-62.977c34.781 0 62.977 28.195 62.977 62.977s-28.195 62.977-62.977 62.977zm138.87 115.45c-30.227 44.355-81.148 73.473-138.87 73.473-57.723 0-108.64-29.117-138.87-73.473 30.227-44.352 81.148-73.469 138.87-73.469 57.719 0 108.64 29.117 138.87 73.469z" fill-rule="evenodd"></path>
        </svg>
    
        <p class="text-center font-semibold text-gray-200 md:text-3xl lg:text-4xl">REGISTER</p>
    </div>

    <div class="bg-gray-100 mb-5 lg:w-4/12 md:w-5/12 w-6/12 shadow-lg rounded-2xl" style="background-color: #262c3e;">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="bg-red-600 text-center text-white p-4 rounded  ">
            {{ messages[0] }}
        </div>
        {% endif %}
        {% endwith %}
        <div id="js-error-message" class="bg-red-600 text-center text-white p-4 rounded hidden"></div>
        <form action="{{ url_for('auth.register') }}" method="post" class="pt-6 pb-6 md:pt-8 md:pb-8 px-12 md:px-20">
            <div class="flex items-center text-lg mb-6 md:mb-8">
                <svg class="absolute ml-3" width="24" viewBox="0 0 24 24">
                    <path d="M20.822 18.096c-3.439-.794-6.64-1.49-5.09-4.418 4.72-8.912 1.251-13.678-3.732-13.678-5.082 0-8.464 4.949-3.732 13.678 1.597 2.945-1.725 3.641-5.09 4.418-3.073.71-3.188 2.236-3.178 4.904l.004 1h23.99l.004-.969c.012-2.688-.092-4.222-3.176-4.935z"/>
                </svg>
                <input type="text" name="username" id="username" class="bg-gray-200 dark:bg-zinc-300 text-black dark:placeholder-gray-400 rounded pl-12 py-2 md:py-4 focus:outline-none w-full" placeholder="Username" autocomplete="off" autofocus />
            </div>
            <div class="flex items-center text-lg mb-6 md:mb-8">
                <svg class="absolute ml-3" width="24" viewBox="0 0 24 24">
                    <path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z" /><path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z" />
                </svg>
                <input type="text" name="email" id="email" class="bg-gray-200 dark:bg-zinc-300 text-black dark:placeholder-gray-400 rounded pl-12 py-2 md:py-4 focus:outline-none w-full" placeholder="E-mail" autocomplete="off" />
            </div>
            <div class="flex items-center text-lg mb-6 md:mb-8">
                <svg class="absolute ml-3" width="24" viewBox="0 0 24 24">
                    <path fill-rule="evenodd" d="M3 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5H15v-18a.75.75 0 0 0 0-1.5H3ZM6.75 19.5v-2.25a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 0 1.5h-.75A.75.75 0 0 1 6 6.75ZM6.75 9a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75ZM6 12.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 0 1.5h-.75a.75.75 0 0 1-.75-.75ZM10.5 6a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75Zm-.75 3.75A.75.75 0 0 1 10.5 9h.75a.75.75 0 0 1 0 1.5h-.75a.75.75 0 0 1-.75-.75ZM10.5 12a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75ZM16.5 6.75v15h5.25a.75.75 0 0 0 0-1.5H21v-12a.75.75 0 0 0 0-1.5h-4.5Zm1.5 4.5a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Zm.75 2.25a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75v-.008a.75.75 0 0 0-.75-.75h-.008ZM18 17.25a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Z" clip-rule="evenodd" />
                </svg>
                <input type="text" name="group" id="group" class="bg-gray-200 dark:bg-zinc-300 text-black dark:placeholder-gray-400 rounded pl-12 py-2 md:py-4 focus:outline-none w-full" placeholder="Company/Organization Name" autocomplete="off" />
            </div>
            <div class="flex items-center text-lg mb-6 md:mb-8">
                <svg class="absolute ml-3" width="24" viewBox="0 0 24 24">
                    <path d="m18.75 9h-.75v-3c0-3.309-2.691-6-6-6s-6 2.691-6 6v3h-.75c-1.24 0-2.25 1.009-2.25 2.25v10.5c0 1.241 1.01 2.25 2.25 2.25h13.5c1.24 0 2.25-1.009 2.25-2.25v-10.5c0-1.241-1.01-2.25-2.25-2.25zm-10.75-3c0-2.206 1.794-4 4-4s4 1.794 4 4v3h-8zm5 10.722v2.278c0 .552-.447 1-1 1s-1-.448-1-1v-2.278c-.595-.347-1-.985-1-1.722 0-1.103.897-2 2-2s2 .897 2 2c0 .737-.405 1.375-1 1.722z"/>
                </svg>
                <input type="password" name="password" id="password" class="bg-gray-200 dark:bg-zinc-300 text-black dark:placeholder-gray-400 rounded pl-12 py-2 md:py-4 focus:outline-none w-full" placeholder="Password" autocomplete="off" />
            </div>
            <div class="flex items-center text-lg mb-6 md:mb-8">
                <svg class="absolute ml-3" width="24" viewBox="0 0 24 24">
                    <path d="m18.75 9h-.75v-3c0-3.309-2.691-6-6-6s-6 2.691-6 6v3h-.75c-1.24 0-2.25 1.009-2.25 2.25v10.5c0 1.241 1.01 2.25 2.25 2.25h13.5c1.24 0 2.25-1.009 2.25-2.25v-10.5c0-1.241-1.01-2.25-2.25-2.25zm-10.75-3c0-2.206 1.794-4 4-4s4 1.794 4 4v3h-8zm5 10.722v2.278c0 .552-.447 1-1 1s-1-.448-1-1v-2.278c-.595-.347-1-.985-1-1.722 0-1.103.897-2 2-2s2 .897 2 2c0 .737-.405 1.375-1 1.722z"/>
                </svg>
                <input type="password" name="confirm_password" id="confirm_password" class="bg-gray-200 dark:bg-zinc-300 text-black dark:placeholder-gray-400 rounded pl-12 py-2 md:py-4 focus:outline-none w-full" placeholder="Repeat Password" autocomplete="off" />
            </div>
            <button type="submit" class="  font-bold p-2 md:p-4 text-white uppercase w-full rounded bg-accent-40 hover:bg-accent" style=" color: #080a0a;">Register</button>
        </form>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const form = document.querySelector("form");
        const errorMessage = document.getElementById("js-error-message");

        form.addEventListener("submit", function(event) {
            // Clear previous error message
            errorMessage.classList.add("hidden");
            errorMessage.innerText = "";

            const username = document.getElementById("username").value.trim();
            const email = document.getElementById("email").value.trim();
            const group = document.getElementById("group").value.trim();
            const password = document.getElementById("password").value;
            const confirmPassword = document.getElementById("confirm_password").value;

            if (!username || !email || !group || !password || !confirmPassword) {
                showError("All fields are required");
                event.preventDefault();
                return;
            }

            if (password !== confirmPassword) {
                showError("Passwords do not match");
                event.preventDefault();
                return;
            }

            if (!validateEmail(email)) {
                showError("Enter a valid email address");
                event.preventDefault();
                return;
            }
        });

        function showError(message) {
            errorMessage.innerText = message;
            errorMessage.classList.remove("hidden");
        }

        function validateEmail(email) {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailPattern.test(email);
        }
    });
</script>
{% endblock %}